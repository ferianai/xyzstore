(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,81501,e=>{"use strict";var a=e.i(43476),t=e.i(71645);async function s(e,a){let t=await fetch(e,a);if(!t.ok){let e=`Request failed dengan status ${t.status}`;try{let a=await t.text(),s=JSON.parse(a);s?.message&&(e=s.message)}catch{}throw Error(e)}try{return await t.json()}catch{return await t.text()}}let r=e.i(47167).default.env.NEXT_PUBLIC_GOOGLE_SHEET_API;async function l(){return{status:"success",data:await s(r),message:"Products fetched successfully"}}async function n(e){return{status:"success",data:await s(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),message:"Product created successfully"}}async function i(e,a){return{status:"success",data:await s(r,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),message:"Product updated successfully"}}async function c(e){return{status:"success",data:await s(r,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}),message:"Product deleted successfully"}}let d={id:0,Nama_Produk:"",Harga_Beli_Sales:0,Harga_Beli_SM:0,Isi:0,Harga_Beli_Pcs:0,Harga_Jual_Dus:0,Harga_Jual_Ecer:0,Kategori:"",Persen_Laba_Ecer:.05,Laba_Dus:2e3};function u({initialData:e,onSubmit:s,buttonLabel:r}){let[l,n]=(0,t.useState)(e||d),i=e=>{let{name:a,value:t}=e.target;n(e=>({...e,[a]:"Harga_Beli_Sales"===a||"Harga_Beli_SM"===a||"Isi"===a||"Harga_Beli_Pcs"===a||"Harga_Jual_Dus"===a||"Harga_Jual_Ecer"===a||"Persen_Laba_Ecer"===a||"Laba_Dus"===a?Number(t):t}))},c=async e=>{e.preventDefault(),await s(l)};return(0,a.jsxs)("form",{onSubmit:c,className:"max-w-md space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Nama Produk"}),(0,a.jsx)("input",{type:"text",name:"Nama_Produk",value:l.Nama_Produk,onChange:i,className:"border w-full px-2 py-1",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Harga Beli Sales"}),(0,a.jsx)("input",{type:"number",name:"Harga_Beli_Sales",value:l.Harga_Beli_Sales,onChange:i,className:"border w-full px-2 py-1",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Harga Beli SM"}),(0,a.jsx)("input",{type:"number",name:"Harga_Beli_SM",value:l.Harga_Beli_SM,onChange:i,className:"border w-full px-2 py-1",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Isi"}),(0,a.jsx)("input",{type:"number",name:"Isi",value:l.Isi,onChange:i,className:"border w-full px-2 py-1",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Kategori"}),(0,a.jsxs)("select",{name:"Kategori",value:l.Kategori,onChange:i,className:"border w-full px-2 py-1",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Pilih Kategori"}),(0,a.jsx)("option",{value:"Lain-lain",children:"Lain-lain"}),(0,a.jsx)("option",{value:"Makanan",children:"Makanan"}),(0,a.jsx)("option",{value:"Minuman",children:"Minuman"}),(0,a.jsx)("option",{value:"Pembersih",children:"Pembersih"})]})]}),(0,a.jsx)("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:r})]})}function o({products:e,onAdd:s,onEdit:r,onDelete:l}){let[n,i]=(0,t.useState)(!1),[c,d]=(0,t.useState)(!1),[o,m]=(0,t.useState)(null),h=async a=>{let t=a.Harga_Beli_SM/a.Isi,r=a.Harga_Beli_SM+2e3,l=t+.05*t,n=l<1e4?500*Math.ceil(l/500):1e3*Math.ceil(l/1e3),c={...a,id:Math.max(0,...e.map(e=>e.id))+1,Harga_Beli_Pcs:t,Harga_Jual_Dus:r,Harga_Jual_Ecer:n,Persen_Laba_Ecer:.05,Laba_Dus:2e3};await s(c),i(!1)},x=async e=>{if(!o)return;let a=e.Harga_Beli_SM/e.Isi,t=e.Harga_Beli_SM+2e3,s=a+.05*a,l=s<1e4?500*Math.ceil(s/500):1e3*Math.ceil(s/1e3),n={...e,Harga_Beli_Pcs:a,Harga_Jual_Dus:t,Harga_Jual_Ecer:l,Persen_Laba_Ecer:.05,Laba_Dus:2e3};await r(o.id,n),d(!1),m(null)},b=async e=>{confirm("Apakah Anda yakin ingin menghapus produk ini?")&&await l(e)};return e.length?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>i(!0),className:"mb-4 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600",children:"+ Tambah Produk"}),(0,a.jsxs)("table",{className:"min-w-full border border-gray-300",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-100",children:[(0,a.jsx)("th",{className:"border px-2 py-1 text-left",children:"ID"}),Object.keys(e[0]).filter(e=>"id"!==e).map(e=>(0,a.jsx)("th",{className:"border px-2 py-1 text-left",children:e.replace(/_/g," ")},e)),(0,a.jsx)("th",{className:"border px-2 py-1",children:"Action"})]})}),(0,a.jsx)("tbody",{children:e.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"border px-2 py-1",children:e.id}),Object.entries(e).filter(([e])=>"id"!==e).map(([e,t])=>(0,a.jsx)("td",{className:"border px-2 py-1",children:String(t)},e)),(0,a.jsxs)("td",{className:"border px-2 py-1",children:[(0,a.jsx)("button",{onClick:()=>{m(e),d(!0)},className:"text-blue-600 hover:underline mr-2",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>b(e.id),className:"text-red-600 hover:underline",children:"Hapus"})]})]},e.id))})]}),n&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg max-w-md w-full",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Add Produk"}),(0,a.jsx)(u,{onSubmit:h,buttonLabel:"Tambah"}),(0,a.jsx)("button",{onClick:()=>i(!1),className:"mt-4 bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Batal"})]})}),c&&o&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg max-w-md w-full",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Edit Produk"}),(0,a.jsx)(u,{initialData:o,onSubmit:x,buttonLabel:"Update"}),(0,a.jsx)("button",{onClick:()=>{d(!1),m(null)},className:"mt-4 bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Batal"})]})})]}):(0,a.jsx)("p",{children:"Tidak ada data."})}function m(){let{products:e,loading:s,error:r,addProduct:d,editProduct:u,removeProduct:m}=function(){let[e,a]=(0,t.useState)([]),[s,r]=(0,t.useState)(!1),[d,u]=(0,t.useState)(null);async function o(){try{r(!0);let e=await l();"success"===e.status&&e.data?(a(e.data),u(null)):u(e.message)}catch(e){e instanceof Error?u(e.message):u(String(e))}finally{r(!1)}}async function m(e){try{await n(e),await o()}catch(e){e instanceof Error?u(e.message):u(String(e))}}async function h(e,a){try{await i(e,a),await o()}catch(e){e instanceof Error?u(e.message):u(String(e))}}async function x(e){try{await c(e),await o()}catch(e){e instanceof Error?u(e.message):u(String(e))}}return(0,t.useEffect)(()=>{o()},[]),{products:e,loading:s,error:d,addProduct:m,editProduct:h,removeProduct:x}}();return s?(0,a.jsx)("p",{className:"p-6",children:"Memuat data..."}):r?(0,a.jsxs)("p",{className:"p-6 text-red-500",children:["Error: ",r]}):(0,a.jsxs)("main",{className:"p-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Daftar Produk"}),(0,a.jsx)(o,{products:e,onAdd:d,onEdit:u,onDelete:m})]})}e.s(["default",()=>m],81501)}]);